{% extends "partial/body.html" %}
{% load crispy_forms_tags %}
{% load crispy_forms_filters %}
{% load bootstrap5 %}
{% load static %}

{% block contenido %}
{% include "partial/header_gestion_secuencias.html" %}
{% include "partial/loading.html" %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<link rel="stylesheet" href="{% static 'css/secuencias/secueciasValidadas.css' %}">

{% include "secuencias/modales/modal_detalles_secuencias_validadas.html" %}

<!-- Contenido principal -->
<div class="contenido" id="content" style="display: none;">
  <div class="container-fluid">
    <div class="card">
      <div class="card-body table-responsive table-bordered">

        <!-- Checkboxes y select para items por página -->
<div class="estado-checkboxes d-flex gap-4 align-items-center mb-3">
  <label class="estado-check text-warning mb-0">
    <input type="checkbox" id="chkImpresa" /> Impresa
  </label>
  <label class="estado-check text-success mb-0">
    <input type="checkbox" id="chkReportada" /> Reportada
  </label>
  <label class="estado-check text-primary mb-0">
    <input type="checkbox" id="chkAuditada" /> Auditada
  </label>

  <label for="itemsPerPage" class="form-label mb-0 ms-auto">Mostrar:</label>
  <select id="itemsPerPage" class="form-select form-select-sm" style="width: auto; display: inline-block;">
    <option value="5">5</option>
    <option value="10" selected>10</option>
    <option value="25">25</option>
    <option value="50">50</option>
  </select>
</div>

        <!-- Tabla -->
        <table id="table" class="table table-sm text-center expandable-table">
          <thead>
            <tr>
              <th style="display:none;"></th>
              <th>
                <input id="filtroNombre" class="form-control form-control-sm" placeholder="Nombre" />
              </th>
              <th>
                <select id="filtroEstado" class="form-select form-select-sm">
                  <option value="">Todos</option>
                  <option value="Revisada">Revisada</option>
                  <option value="Impresa">Impresa</option>
                  <option value="Reportada">Reportada</option>
                  <option value="Auditada">Auditada</option>
                  <option value="Ensayo">Ensayo</option>
                </select>
              </th>
              <th>
                <input id="filtroMetodo" class="form-control form-control-sm" placeholder="Método / Protocolo" />
              </th>
              <th>
                <input id="filtroParametro" class="form-control form-control-sm" placeholder="Parámetro" />
              </th>
              <th>
                <input id="filtroMuestra" class="form-control form-control-sm" placeholder="Muestra" />
              </th>
              <th>
                <input id="filtroSistema" class="form-control form-control-sm" placeholder="Sistema" />
              </th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>

        <!-- Paginación -->
        <div id="pagination" class="text-center mt-3"></div>

      </div>
    </div>
  </div>
</div>


<!--Status-->
<script src="{% static 'js/secuencias/secuenciasValidadas/statusSecuencias.js' %}" ></script>

<!--Descripcion de Muestras-->
<script src="{% static 'js/secuencias/secuenciasValidadas/descripcionMuestras.js' %}" ></script>

<!--Tabla de Secuencia-->
<script src="{% static 'js/secuencias/secuenciasValidadas/tablaSecuenciasValidadas.js' %}" ></script>

<!--Pripiedades de Tabla-->
<script src="{% static 'js/secuencias/secuenciasValidadas/expandirDescripcionMustrasValidadas.js' %}" ></script>

<!--Tabla Expandible-->
<script src="{% static 'js/secuencias/secuenciasValidadas/propiedadesDeTabla.js' %}" ></script>

<!--Api deata y Renderización-->
<script src="{% static 'js/secuencias/secuenciasValidadas/apiSecuenciasValidadas.js' %}" ></script>

<!--Estado Mas Eventos-->
<script src="{% static 'js/secuencias/secuenciasValidadas/estadoMasEventos.js' %}" ></script>

<!--Detalles de Secuencias -->
<script src="{% static 'js/secuencias/secuenciasValidadas/detallesSecuenciasValidadas.js' %}" ></script>

<!--Acción de Actualizar -->
<script src="{% static 'js/secuencias/secuenciasValidadas/accionActualizarEstado.js' %}" ></script>

  <!-- Scripts -->
<script>
const USER_ROLE = "{{ request.user.groups.all.0.name|default:'' }}";
let currentEditingId = null;
function limpiarNone(valor, reemplazo = 'No aplica') {
  return (valor && valor !== 'None') ? valor : reemplazo;
}
</script>

{% endblock %}


