{% extends "protocolo_metodos/base_crear_protocolo_metodos.html" %}
{% load bootstrap5 %}
{% load crispy_forms_tags %}
{% load static %}

{% block contenido %}
{% include "partial/loading.html" %}
{% include "partial/loadingPaginas.html" %}

<!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>

<!-- Select2 CSS -->
<!-- Tom Select CSS -->
<link href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.bootstrap5.min.css" rel="stylesheet">

<!-- Tom Select JS. -->
<script src="https://cdn.jsdelivr.net/npm/tom-select/dist/js/tom-select.complete.min.js"></script>


<div id="contenido-cargado" class="d-none">
  <div class="container-fluid"><br>
    <div class="row">
      <div class="card col-12 col-lg-7" style="background-color: #1b3d70c2;margin: auto;">
        <h5 class="text-white text-center"><br>Editar Protocolo de Métodos</h5>
      </div>
      <div class="card col-12 col-lg-7" style="margin: auto; background-color: rgba(252, 252, 252, 0.529);">
        <div class="row gy-1 gy-xl-2 p-4 p-xl-4">

          <form id="formProtocolo" method="POST" action="{% url 'editar_protocolo_metodos' protocolo.pk %}">
            {% csrf_token %}
            <!-- Reutilizas exactamente el mismo bloque de campos que ya tienes -->
            <div class="row">
              <div class="col-md-6">{{ form.fecha_ingreso|as_crispy_field }}</div>
              <div class="col-md-6">{{ form.codigo|as_crispy_field }}</div>
            </div>
            <div class="row">
              <div class="col-md-6">{{ form.cliente|as_crispy_field }}</div>
              <div class="col-md-6">{{ form.ensayo|as_crispy_field }}</div>
            </div>
            <div class="row">
              <div class="col-md-6">{{ form.celda|as_crispy_field }}</div>
              <div class="col-md-6">{{ form.metodologia|as_crispy_field }}</div>
            </div>
            <div class="row">
              <div class="col-md-6">{{ form.metodo|as_crispy_field }}</div>
              <div class="col-md-6">{{ form.estado_protocolo|as_crispy_field }}</div>
            </div>

            {{ form.nombre|as_crispy_field }}
            {{ form.Insumos_del_Proceso|as_crispy_field }}

            <div class="col-md-12">
              <div class="mb-3">
                {{ form.parametro.label_tag }}
                {{ form.parametro }}
                {% if form.parametro.errors %}
                  <div class="text-danger small">{{ form.parametro.errors }}</div>
                {% endif %}
              </div>
            </div>

            <div class="col-md-12">
              <div class="mb-3">
                {{ form.muestras_y_Placebos.label_tag }}
                {{ form.muestras_y_Placebos }}
                {% if form.muestras_y_Placebos.errors %}
                  <div class="text-danger small">{{ form.muestras_y_Placebos.errors }}</div>
                {% endif %}
              </div>
            </div>

            {{ form.observaciones|as_crispy_field }}                        <div id="div_id_fecha_final" class="mb-3">
              <label for="id_fecha_final" class="form-label requiredField">
                  Fecha del estado<span class="asteriskField">*</span>
              </label>
            <input type="date" name="fecha_final" class="numberinput form-control" required id="id_fecha_final">
          </div>
              <div class="row">
                <div class="col-md-6">
                  {{ form.entregado_a|as_crispy_field  }}
                </div>
                <div class="col-md-6">
                   {{ form.fecha_de_entrega|as_crispy_field  }}
                </div>
              </div>




            <div class="modal-footer">
              <a href="{% url 'protocolo_metodos' %}" class="btn btn-dark" style="background-color: #7d848ec2;">Cancelar</a>
              <button type="submit" class="btn btn-primary" style="background-color: #1b3d70c2;">Actualizar</button>
            </div>
          </form>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- estilos, JS y lógica que usas en crear -->
<script src="{% static 'js/protocoloMetodos/creacionEdicionProtocoloMetodos.js' %}" ></script>

{% endblock contenido %}
